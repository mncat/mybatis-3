# Mybatis缓存模块
## 一、简介
+ Mybatis的缓存模块用于缓存查询过的数据，便于提高性能，在自己设计的缓存模块可以考虑使用。

### 1.1 设计思想  
+ 缓存模块的核心功能是能够从缓存中读取数据，但是还有许多附加的功能，比如防止缓存击穿，添加缓存情况策略等，附加功能需要能够组合添加到核心功能之上。

## 二、装饰器模式引入
### 2.1 来源--给类添加功能的方法
+ 继承 -- 静态的，不能再程序运行的时候动态控制，并且当新功能太多时，继承会导致大量的子类存在
+ 装饰器模式将类之间的关联关系代替了继承关系，不需要继承扩展类的功能，可以避免体系的快速膨胀

### 2.2 设计
+ 装饰类被装饰类实现同一个接口，该接口定义了装饰类和被装饰类的共同行为，装饰类内部包装一个接口对象(使用多态传入被装饰类)  

### 2.3 优缺点
+ 便于扩展，灵活，满足扩展性，满足开闭原则
 
### 2.4 借鉴
+ JDK中的IO流就是典型的装饰器模式 

### 2.5 代码
#### 2.5.1 PerpetualCache
```
    PerpetualCache类是Mybatis中提供缓存能力的类，该类是基于Map来保存缓存数据并提供数据的存取功能的，这个就是设计思路中所提到的核心功能。
    而缓存除了提供存取这样的核心功能之外，还有很多附加功能，比如提供阻塞的功能，保证同一时间只能有一个线程访问缓存，或者提供FIFO的淘汰策略，
    或者提供LRU的淘汰策略等，这样的附加功能都有对应的类去实现，而这些类里面都包装有一个PerpetualCache对象。
```
 
## 三、目录结构
+ org.apache.ibatis.cache包下
+ org.apache.ibatis.cache.Cache：缓存接口
+ org.apache.ibatis.cache.impl.PerpetualCache：缓存实现类，实现缓存的存取功能，是缓存核心功能的实现类，也是被装饰的对象
+ org.apache.ibatis.cache.decorators：缓存附加功能对应的实现类，也是装饰器类，实现向被装饰类添加的功能

## 四、源码解析
